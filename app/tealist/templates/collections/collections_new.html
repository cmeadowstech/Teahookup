{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container">
    <div class="card">
        <div class="row no-gutters">
            <div class="col-md-6 text-white login">
                <div class="card-body">
                    <h4 class="pb-2 card-title">Create a new collection</h4>
                    {% if messages %}
    
                    {% for message in messages %}
                    {% if 'signed' not in message|safe %}
                    <div class="alert alert-success {{ message.tags }}" role="alert">
                        {{ message }}
                    </div>
                    {% endif %}
                    {% endfor %}
    
                    {% endif %}
                    {% if user.is_authenticated %}
                    <fieldset>
                        {% else %}
                        <fieldset disabled>
                            <div class="alert alert-warning" role="alert">
                                Please login to create a collection.
                            </div>
                            {% endif %}
    
                            <form action="{% url 'collections_new' %}" method="post">
                                {% csrf_token %}
    
                                {{ form.as_p}}
                                <button class="btn btn-primary rounded-0 w-100 p-1 submit-filters" hx-post="{% url 'collections_new_preview' %}"
                                    hx-target=".preview" />Preview</button>
                                <input type="submit" value="Submit Vendor" class="w-100 p-1 submit-filters" />
                        </fieldset>
                        </form>
                </div>
            </div>
            <div class="col-md-6 preview">
                <div class="card-body">
                    <h4 class="pb-2 card-title">Preview</h4>
                    <p class="text-white">Hit 'Preview' to see what this collection will look like once submitted</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        new TomSelect("#input-vendors", {
            plugins: {
                remove_button:{
                    title:'Remove this item',
                }
            },
            persist: false,
            createOnBlur: true,
            create: false,
            maxItems: 10
        });
    </script>
    
    <script>
        var simplemde = new SimpleMDE({
            element: document.getElementById("SimpleMDE"),
            autosave: {
                enabled: true,
                uniqueId: "SimpleMDE-UID",
                delay: 1000,
            },
            forceSync: true
        });
    </script>
</div>

{% endblock %}