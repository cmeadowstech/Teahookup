{% extends "base.html" %}

{% block content %}

  <div class="row vendorlist">
    <ul class="vendors vendor-list list-group col-12 col-md-9 order-2 order-md-1 text-white pr-0">
      {% include 'vendor_list_partial.html' %}
    </ul>

    <!-- Form for filtering results -->

    <form class="filter-form col-12 col-md-3 order-1 order-md-2 text-dark pt-3 pb-3 mt-1" hx-get="{% url 'vendors' %}" hx-target=".vendors" hx-push-url="true">

      {{ filter_form.form.name }}
      {{ filter_form.form.o }}

      <div id="accordion" class="text-white">
        <div class="card border-0 rounded-0">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button type="button" class="btn btn-link collapsed text-white pl-0" data-toggle="collapse"
                data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Store Location
              </button>
            </h5>
          </div>

          <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
              {% for v in filter_form.form.store_location %}
              {{ v.tag }}<label for="{{ v.id_for_label }}" class="badge badge-success label-for-check text-large">
                {{ v.choice_label }}
              </label>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="card border-0 rounded-0">
          <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
              <button type="button" class="btn btn-link collapsed text-white pl-0" data-toggle="collapse"
                data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                Ships To
              </button>
            </h5>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
              {% for v in filter_form.form.ship_to %}
              {{ v.tag }}<label for="{{ v.id_for_label }}" class="badge badge-success label-for-check text-large text-large">
                {{ v.choice_label }}
              </label>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="card border-0 rounded-0">
          <div class="card-header" id="headingThree">
            <h5 class="mb-0">
              <button type="button" class="btn btn-link collapsed text-white pl-0" data-toggle="collapse"
                data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                Sources From
              </button>
            </h5>
          </div>
          <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
            <div class="card-body">
              {% for v in filter_form.form.tea_source %}
              {{ v.tag }}<label for="{{ v.id_for_label }}" class="badge badge-success label-for-check text-large text-large">
                {{ v.choice_label }}
              </label>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="card border-0 rounded-0">
          <div class="card-header" id="headingFour">
            <h5 class="mb-0">
              <button type="button" class="btn btn-link collapsed text-white pl-0" data-toggle="collapse"
                data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                Varities
              </button>
            </h5>
          </div>
          <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
            <div class="card-body">
              {% for v in filter_form.form.variety %}
              {{ v.tag }}<label for="{{ v.id_for_label }}" class="badge badge-success label-for-check text-large text-large">
                {{ v.choice_label }}
              </label>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

      <input type="submit" value="Apply Filters" class="w-100 p-1 m-0 submit-filters" />

    </form>
  </div>

  <script>
    var elements = document.getElementsByTagName("INPUT");
    for (var inp of elements) {
      if (inp.type === "checkbox")
        inp.checked = false;
    }
  </script>

  <script>
    function closeModal() {
      var container = document.getElementById("vendor-modal")
      var backdrop = document.getElementById("modal-backdrop")
      var modal = document.getElementById("modal")

      modal.classList.remove("show")
      backdrop.classList.remove("show")

      setTimeout(function() {
        container.removeChild(backdrop)
        container.removeChild(modal)
      }, 200)
    }
  </script>

  {% endblock %}