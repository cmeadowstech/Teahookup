{% extends "base.html" %}

{% block content %}


<div class="container mx-auto grid md:grid-cols-4 gap-2">
  <div class="list-group md:col-span-3 px-1">
    {% include 'vendor/vendor_list_partial.html' %}
  </div>

  <!-- Form for filtering results -->

  <form class="collapse collapse-plus md:collapse-open bg-base-300 shadow-xl h-fit order-first md:order-last" hx-get="{% url 'vendors' %}"
    hx-target=".list-group" hx-push-url="true">
    <input type="checkbox" /> 
    <div class="collapse-title text-xl font-serif font-bold">
      Filters
    </div>
    <fieldset class="collapse-content filter-form border-0 shadow">
      {{ filter_form.form.name }}
      <div class="mt-2">
      {{ filter_form.form.o }}
      </div>

      <div id="accordion" class="">
        <div class="collapse collapse-arrow">
          <input type="radio" name="my-accordion-2"/> 
          <div class="collapse-title px-2 text-xl font-medium">
            Store Location 
          </div>
          <div class="collapse-content"> 
            {% for v in filter_form.form.store_location %}
            <label for="{{ v.id_for_label }}">
              {{ v.tag }}
              <div class="badge badge-success peer-checked:badge-primary font-bold">{{ v.choice_label }}</div>
            </label>
            {% endfor %}
          </div>
        </div>

        <div class="collapse collapse-arrow">
          <input type="radio" name="my-accordion-2"/> 
          <div class="collapse-title px-2 text-xl font-medium">
            Ships To 
          </div>
          <div class="collapse-content"> 
            {% for v in filter_form.form.ship_to %}
            <label for="{{ v.id_for_label }}">
              {{ v.tag }}
              <div class="badge badge-success peer-checked:badge-primary font-bold">{{ v.choice_label }}</div>
            </label>
            {% endfor %}
          </div>
        </div>

        <div class="collapse collapse-arrow">
          <input type="radio" name="my-accordion-2"/> 
          <div class="collapse-title px-2 text-xl font-medium">
            Sources From
          </div>
          <div class="collapse-content"> 
            {% for v in filter_form.form.tea_source %}
              <label for="{{ v.id_for_label }}">
                {{ v.tag }}
                <div class="badge badge-success peer-checked:badge-primary font-bold">{{ v.choice_label }}</div>
              </label>
            {% endfor %}
          </div>
        </div>

        <div class="collapse collapse-arrow">
          <input type="radio" name="my-accordion-2"/> 
          <div class="collapse-title px-2 text-xl font-medium">
            Varities
          </div>
          <div class="collapse-content"> 
            {% for v in filter_form.form.variety %}
              <label for="{{ v.id_for_label }}">
                {{ v.tag }}
                <div class="badge badge-success peer-checked:badge-primary font-bold">{{ v.choice_label }}</div>
              </label>
              {% endfor %}
          </div>
        </div>
      </div>

      <input type="submit" value="Apply Filters" class="btn btn-primary hover:btn-secondary w-full p-2 m-0 font-serif" />
    </fieldset>
  </form>
</div>

<script>
  var elements = document.getElementsByTagName("INPUT");
  for (var inp of elements) {
    if (inp.type === "checkbox")
      inp.checked = false;
  }
</script>

<script>
  function closeModal() {
    var container = document.getElementById("vendor-modal")
    var backdrop = document.getElementById("modal-backdrop")
    var modal = document.getElementById("modal")

    modal.classList.remove("show")
    backdrop.classList.remove("show")

    setTimeout(function () {
      container.removeChild(backdrop)
      container.removeChild(modal)
    }, 200)
  }
</script>

{% endblock %}