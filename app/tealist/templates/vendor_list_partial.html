{% load static %}
{% if filter %}
{% for vendor in filter %}
<li class="list-group-item mb-2 border-0 shadow">
    <h4>
        <a href="{{ vendor.get_absolute_url }}" hx-get="{{ vendor.get_absolute_url }}" hx-target="#htmx-modal" hx-trigger="click">
            {{ vendor.name }}
        </a>
        <a href="{{ vendor.url }}" class="link-primary" target="_blank">
            <i class="material-symbols-outlined material-small">open_in_new</i>
        </a>
        {% if vendor.url_alt %}
        <a href="/{{ vendor.url_alt }}" class="link-primary" target="_blank">
            <i class="material-symbols-outlined material-small">public</i>
        </a>
        {% endif %}

        {% if vendor.rating %}
        <span class="badge badge-primary float-right">{{ vendor.rating }}</span>
        {% endif %}
        <a href="{{ vendor.get_absolute_url }}">
            <img src="{% static 'share.svg' %}" class="float-right img-fluid" width="26">
        </a>
    </h4>
    <div>
        {% for variety in vendor.variety.all %}
        <span class="badge badge-success badge-pill">{{ variety }}</span>
        {% endfor %}
    </div>
    {% if vendor.description %}
    <div class="pt-4 pb-4 border-bottom">
        <p>
        {{ vendor.description }}
        </p>
    </div>
    {% endif %}
    <div class="row locations">
        <div class="col-4 col-md border-right pt-1">
            <small>
                <i class="material-symbols-outlined material-small">local_shipping</i> Ships To: {{ vendor.ship_to.all|join:", " }}
            </small>
        </div>
        <div class="col-4 col-md border-right pt-1">
            <small>
                <i class="material-symbols-outlined material-small">home</i> Ships From: {{ vendor.store_location.all|join:", " }}
            </small>
        </div>
        <div class="col-4 col-md pt-1">
            <small>
                <i class="material-symbols-outlined material-small">map</i> Sources From: {{ vendor.tea_source.all|join:", " }}
            </small>
        </div>
    </div>
</li>
{% endfor %}

<!-- If there are no results matching the filter -->

{% else %}
<li class="list-group-item mt-1 mb-1 border-0 shadow">
    <p>There are no vendors that match your criteria.</p>
</li>
{% endif %}

<!-- Pagination -->
<li class="list-group-item mt-1 mb-1 p-0 page-nav">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-end">
            {% if filter.has_previous %}
            <li class="page-item w-50"><a class="page-link"
                    hx-get="{% url 'vendors' %}?page={{ filter.previous_page_number }}&{{ parameters }}"
                    hx-target=".list-group" hx-push-url="true">Previous</a></li>
            {% endif %}
            {% if filter.has_next %}
            <li class="page-item w-50 text-right"><a class="page-link"
                    hx-get="{% url 'vendors' %}?page={{ filter.next_page_number }}&{{ parameters }}"
                    hx-target=".list-group" hx-push-url="true">Next</a></li>
            {% endif %}
        </ul>
    </nav>
</li>
